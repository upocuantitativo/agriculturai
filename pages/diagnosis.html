<!-- Página de Diagnóstico Visual -->
<div class="container content-section">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <h1 class="section-title text-center">
                <i class="bi bi-camera-fill me-2"></i>
                Diagnóstico Visual de Enfermedades
            </h1>
            <p class="text-center text-muted mb-4">
                Toma una foto de la planta afectada y descubre qué enfermedad tiene en segundos
            </p>

            <!-- Área de captura/subida de imagen -->
            <div class="card mb-4">
                <div class="card-body">
                    <div id="upload-area" class="text-center py-5">
                        <i class="bi bi-cloud-upload display-1 text-primary mb-3"></i>
                        <h4>Sube o captura una imagen</h4>
                        <p class="text-muted mb-4">
                            Acepta archivos JPG, PNG. Tamaño máximo: 5MB
                        </p>

                        <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
                            <!-- Botón tomar foto (móvil) -->
                            <div class="file-input-wrapper">
                                <input type="file" id="camera-input" accept="image/*" capture="environment">
                                <label for="camera-input" class="file-input-label">
                                    <i class="bi bi-camera"></i>
                                    Tomar Foto
                                </label>
                            </div>

                            <!-- Botón subir imagen -->
                            <div class="file-input-wrapper">
                                <input type="file" id="file-input" accept="image/*">
                                <label for="file-input" class="file-input-label">
                                    <i class="bi bi-image"></i>
                                    Subir Imagen
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Preview de imagen -->
                    <div id="preview-area" style="display: none;">
                        <div class="image-preview mb-3">
                            <img id="preview-image" src="" alt="Vista previa">
                            <div class="image-preview-overlay">
                                <button type="button" class="btn btn-sm btn-danger" id="remove-image">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="button" class="btn btn-primary btn-lg" id="analyze-btn">
                                <i class="bi bi-cpu me-2"></i>
                                Analizar Planta
                            </button>
                        </div>
                    </div>

                    <!-- Resultados del análisis -->
                    <div id="results-area" style="display: none;">
                        <div class="alert alert-info mb-4">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>Análisis completado.</strong> Aquí están los resultados:
                        </div>

                        <h5 class="mb-3">Posibles diagnósticos:</h5>

                        <!-- Los resultados se insertarán aquí dinámicamente -->
                        <div id="diagnosis-results"></div>

                        <div class="mt-4 d-flex gap-2">
                            <button type="button" class="btn btn-primary" id="new-analysis">
                                <i class="bi bi-arrow-repeat me-2"></i>
                                Nuevo Análisis
                            </button>
                            <a href="/marketplace" data-link class="btn btn-success">
                                <i class="bi bi-shop me-2"></i>
                                Ver Productos
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Información adicional -->
            <div class="card bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-lightbulb text-warning me-2"></i>
                        Consejos para mejores resultados
                    </h5>
                    <ul class="mb-0">
                        <li>Toma la foto con buena iluminación natural</li>
                        <li>Enfoca bien la parte afectada de la planta</li>
                        <li>Evita sombras o reflejos en la imagen</li>
                        <li>Captura solo la hoja o parte enferma, no toda la planta</li>
                        <li>Asegúrate que la imagen no esté borrosa</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
